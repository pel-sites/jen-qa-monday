<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA Phase Transitions</title>
    <style>
        :root {
            --purple: #9d50dd;
            --green: #00c875;
            --orange: #fdab3d;
            --red: #df2f4a;
            --blue: #579bfc;
            --dark-bg: #1a1a2e;
            --card-bg: #16213e;
            --darker-bg: #0f0f23;
        }

        * { box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--card-bg) 100%);
            color: #eee;
            min-height: 100vh;
            margin: 0;
            padding: 40px 20px;
        }

        h1 { text-align: center; margin-bottom: 10px; }
        .subtitle { text-align: center; opacity: 0.7; margin-bottom: 40px; }

        .phase-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        /* Phase Flow Visualization */
        .phase-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
            flex-wrap: wrap;
            margin-bottom: 40px;
            padding: 30px;
            background: var(--card-bg);
            border-radius: 16px;
            border: 1px solid #2a2a4a;
        }

        .phase-node {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 30px;
            border-radius: 12px;
            min-width: 140px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0.4;
            transform: scale(0.95);
        }

        .phase-node.active {
            opacity: 1;
            transform: scale(1.05);
        }

        .phase-node.completed {
            opacity: 0.7;
            transform: scale(1);
        }

        .phase-node.prep { background: var(--blue); }
        .phase-node.prerun { background: var(--orange); color: #000; }
        .phase-node.inprocess { background: var(--green); color: #000; }
        .phase-node.final { background: var(--purple); }

        .phase-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .phase-name {
            font-weight: 600;
            font-size: 1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .phase-steps {
            font-size: 0.75em;
            opacity: 0.8;
            margin-top: 4px;
        }

        /* Pulse animation for active phase */
        .phase-node.active::after {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 16px;
            border: 3px solid currentColor;
            animation: pulseBorder 2s ease-in-out infinite;
        }

        @keyframes pulseBorder {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.02); }
        }

        /* Completed checkmark */
        .phase-node.completed::before {
            content: '‚úì';
            position: absolute;
            top: -8px;
            right: -8px;
            width: 24px;
            height: 24px;
            background: var(--green);
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
            animation: popIn 0.3s ease;
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            70% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Arrows between phases */
        .phase-arrow {
            display: flex;
            align-items: center;
            padding: 0 8px;
        }

        .phase-arrow svg {
            width: 40px;
            height: 24px;
            fill: none;
            stroke: #4a4a6a;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: stroke 0.3s ease;
        }

        .phase-arrow.active svg {
            stroke: var(--green);
        }

        /* Animated arrow path */
        .phase-arrow svg path {
            stroke-dasharray: 50;
            stroke-dashoffset: 50;
            transition: stroke-dashoffset 0.5s ease;
        }

        .phase-arrow.active svg path {
            stroke-dashoffset: 0;
        }

        /* Phase Detail Card */
        .phase-detail {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid #2a2a4a;
            transition: border-color 0.3s ease;
        }

        .phase-detail.prep { border-left: 4px solid var(--blue); }
        .phase-detail.prerun { border-left: 4px solid var(--orange); }
        .phase-detail.inprocess { border-left: 4px solid var(--green); }
        .phase-detail.final { border-left: 4px solid var(--purple); }

        .detail-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .detail-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
        }

        .detail-icon.prep { background: var(--blue); }
        .detail-icon.prerun { background: var(--orange); }
        .detail-icon.inprocess { background: var(--green); }
        .detail-icon.final { background: var(--purple); }

        .detail-title h2 {
            margin: 0 0 4px 0;
            font-size: 1.5em;
        }

        .detail-title .step-range {
            opacity: 0.6;
            font-size: 0.9em;
        }

        .detail-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .detail-item {
            background: var(--darker-bg);
            padding: 16px;
            border-radius: 8px;
            transition: transform 0.2s ease, background 0.2s ease;
        }

        .detail-item:hover {
            transform: translateY(-2px);
            background: #1a1a3a;
        }

        .detail-item h4 {
            margin: 0 0 8px 0;
            font-size: 0.95em;
        }

        .detail-item p {
            margin: 0;
            font-size: 0.85em;
            opacity: 0.7;
            line-height: 1.5;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 28px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .btn-primary {
            background: var(--green);
            color: #000;
        }

        .btn-primary:hover:not(:disabled) {
            background: #00e890;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 200, 117, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: var(--darker-bg);
            color: #eee;
            border: 1px solid #3a3a5a;
        }

        .btn-secondary:hover {
            background: #1a1a3a;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--darker-bg);
            transform: translateX(-50%);
            border-radius: 2px;
        }

        .timeline-progress {
            position: absolute;
            left: 50%;
            top: 0;
            width: 4px;
            height: 0%;
            background: linear-gradient(180deg, var(--blue), var(--orange), var(--green), var(--purple));
            transform: translateX(-50%);
            border-radius: 2px;
            transition: height 0.5s ease;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
        }

        .timeline-item:nth-child(odd) {
            flex-direction: row-reverse;
        }

        .timeline-item:nth-child(odd) .timeline-content {
            text-align: right;
            margin-right: 40px;
        }

        .timeline-item:nth-child(even) .timeline-content {
            margin-left: 40px;
        }

        .timeline-content {
            flex: 1;
            max-width: 45%;
        }

        .timeline-dot {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--darker-bg);
            border: 3px solid #4a4a6a;
            z-index: 1;
            transition: all 0.3s ease;
        }

        .timeline-item.active .timeline-dot {
            transform: translateX(-50%) scale(1.3);
            border-color: var(--green);
            background: var(--green);
            box-shadow: 0 0 20px var(--green);
        }

        .timeline-item.completed .timeline-dot {
            background: var(--green);
            border-color: var(--green);
        }

        /* Transition Animation */
        .transition-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .transition-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .transition-content {
            text-align: center;
        }

        .transition-arrow {
            font-size: 3em;
            margin: 20px 0;
            animation: slideRight 1s ease infinite;
        }

        @keyframes slideRight {
            0%, 100% { transform: translateX(-10px); opacity: 0.5; }
            50% { transform: translateX(10px); opacity: 1; }
        }

        .transition-from,
        .transition-to {
            font-size: 1.5em;
            font-weight: 600;
            padding: 15px 30px;
            border-radius: 12px;
            display: inline-block;
        }

        @media (max-width: 768px) {
            .phase-flow {
                flex-direction: column;
                gap: 10px;
            }

            .phase-arrow {
                transform: rotate(90deg);
            }

            .timeline-item,
            .timeline-item:nth-child(odd) {
                flex-direction: column;
            }

            .timeline-content,
            .timeline-item:nth-child(odd) .timeline-content,
            .timeline-item:nth-child(even) .timeline-content {
                max-width: 100%;
                text-align: center;
                margin: 20px 0 0 0;
            }

            .timeline::before,
            .timeline-progress {
                left: 20px;
            }

            .timeline-dot {
                left: 20px;
            }
        }
    </style>
</head>
<body>
    <h1>QA Phase Workflow</h1>
    <p class="subtitle">Navigate through the 4 phases of the QA process</p>

    <!-- Phase Flow Visualization -->
    <div class="phase-flow">
        <div class="phase-node prep active" data-phase="prep" onclick="goToPhase('prep')">
            <span class="phase-icon">üìã</span>
            <span class="phase-name">Prep</span>
            <span class="phase-steps">Step 0</span>
        </div>
        <div class="phase-arrow" data-arrow="prep-prerun">
            <svg viewBox="0 0 40 24">
                <path d="M 5 12 L 30 12 M 25 6 L 32 12 L 25 18"/>
            </svg>
        </div>
        <div class="phase-node prerun" data-phase="prerun" onclick="goToPhase('prerun')">
            <span class="phase-icon">üîß</span>
            <span class="phase-name">Pre-Run</span>
            <span class="phase-steps">Steps 1-6</span>
        </div>
        <div class="phase-arrow" data-arrow="prerun-inprocess">
            <svg viewBox="0 0 40 24">
                <path d="M 5 12 L 30 12 M 25 6 L 32 12 L 25 18"/>
            </svg>
        </div>
        <div class="phase-node inprocess" data-phase="inprocess" onclick="goToPhase('inprocess')">
            <span class="phase-icon">‚öôÔ∏è</span>
            <span class="phase-name">In-Process</span>
            <span class="phase-steps">Steps 7-11</span>
        </div>
        <div class="phase-arrow" data-arrow="inprocess-final">
            <svg viewBox="0 0 40 24">
                <path d="M 5 12 L 30 12 M 25 6 L 32 12 L 25 18"/>
            </svg>
        </div>
        <div class="phase-node final" data-phase="final" onclick="goToPhase('final')">
            <span class="phase-icon">‚úÖ</span>
            <span class="phase-name">Final</span>
            <span class="phase-steps">Steps 12-13</span>
        </div>
    </div>

    <!-- Controls -->
    <div class="controls">
        <button class="btn btn-secondary" id="prevBtn" onclick="prevPhase()">‚Üê Previous Phase</button>
        <button class="btn btn-primary" id="nextBtn" onclick="nextPhase()">Complete & Next ‚Üí</button>
        <button class="btn btn-secondary" onclick="resetPhases()">Reset</button>
    </div>

    <!-- Phase Detail Card -->
    <div class="phase-detail prep" id="phaseDetail">
        <div class="detail-header">
            <div class="detail-icon prep" id="detailIcon">üìã</div>
            <div class="detail-title">
                <h2 id="detailTitle">Preparation</h2>
                <span class="step-range" id="detailRange">Step 0</span>
            </div>
        </div>
        <div class="detail-content" id="detailContent">
            <!-- Content populated by JS -->
        </div>
    </div>

    <!-- Transition Overlay -->
    <div class="transition-overlay" id="transitionOverlay">
        <div class="transition-content">
            <div class="transition-from" id="transitionFrom">PREP</div>
            <div class="transition-arrow">‚Üí</div>
            <div class="transition-to" id="transitionTo">PRE-RUN</div>
        </div>
    </div>

    <script>
        const phases = [
            {
                id: 'prep',
                name: 'Preparation',
                icon: 'üìã',
                range: 'Step 0',
                color: '#579bfc',
                items: [
                    { title: 'Open Monday.com', desc: 'Access the Production board' },
                    { title: 'Find Today\'s Run', desc: 'Locate in Sprint/Bulk sheet' },
                    { title: 'Gather Spec Sheet', desc: 'Download or print for this batch' },
                    { title: 'Open QA Template', desc: 'Have Inspection Report ready' }
                ]
            },
            {
                id: 'prerun',
                name: 'Pre-Run Verification',
                icon: 'üîß',
                range: 'Steps 1-6',
                color: '#fdab3d',
                items: [
                    { title: 'Spec Sheet at Line', desc: 'Physically verify at production line' },
                    { title: 'Component Check', desc: 'Match all materials to spec' },
                    { title: 'Batch Code Setup', desc: 'Configure printer and verify format' },
                    { title: 'Equipment Cal', desc: 'Verify all calibrations current' },
                    { title: 'Sanitation', desc: 'Confirm line cleaning complete' },
                    { title: 'MO Match', desc: 'Cross-reference all documents' }
                ]
            },
            {
                id: 'inprocess',
                name: 'In-Process Checks',
                icon: '‚öôÔ∏è',
                range: 'Steps 7-11',
                color: '#00c875',
                items: [
                    { title: 'Start QA Report', desc: 'Fill header information' },
                    { title: 'Weight/Fill Checks', desc: 'Record measurements per spec' },
                    { title: 'Visual Inspection', desc: 'Check appearance and labels' },
                    { title: 'Defect Documentation', desc: 'Classify and photograph issues' },
                    { title: 'Retention Compare', desc: 'Check against approved sample' },
                    { title: 'Final Counts', desc: 'Verify yields and sign off' }
                ]
            },
            {
                id: 'final',
                name: 'Final Documentation',
                icon: '‚úÖ',
                range: 'Steps 12-13',
                color: '#9d50dd',
                items: [
                    { title: 'Save to Drive', desc: 'Upload QA docs to proper folder' },
                    { title: 'Attach to Monday', desc: 'Upload to QA DOCS column' },
                    { title: 'Update Status', desc: 'Mark ticket as QA complete' }
                ]
            }
        ];

        let currentPhaseIndex = 0;
        let completedPhases = new Set();

        function init() {
            updateUI();
        }

        function updateUI() {
            const currentPhase = phases[currentPhaseIndex];

            // Update phase nodes
            document.querySelectorAll('.phase-node').forEach((node, idx) => {
                node.classList.remove('active', 'completed');
                if (idx === currentPhaseIndex) {
                    node.classList.add('active');
                } else if (completedPhases.has(phases[idx].id)) {
                    node.classList.add('completed');
                }
            });

            // Update arrows
            document.querySelectorAll('.phase-arrow').forEach((arrow, idx) => {
                arrow.classList.toggle('active', idx < currentPhaseIndex);
            });

            // Update detail card
            const detail = document.getElementById('phaseDetail');
            detail.className = `phase-detail ${currentPhase.id}`;

            document.getElementById('detailIcon').className = `detail-icon ${currentPhase.id}`;
            document.getElementById('detailIcon').textContent = currentPhase.icon;
            document.getElementById('detailTitle').textContent = currentPhase.name;
            document.getElementById('detailRange').textContent = currentPhase.range;

            document.getElementById('detailContent').innerHTML = currentPhase.items.map(item => `
                <div class="detail-item">
                    <h4>${item.title}</h4>
                    <p>${item.desc}</p>
                </div>
            `).join('');

            // Update buttons
            document.getElementById('prevBtn').disabled = currentPhaseIndex === 0;
            document.getElementById('nextBtn').textContent =
                currentPhaseIndex === phases.length - 1 ? 'Complete QA ‚úì' : 'Complete & Next ‚Üí';
        }

        function goToPhase(phaseId) {
            const idx = phases.findIndex(p => p.id === phaseId);
            if (idx !== -1) {
                currentPhaseIndex = idx;
                updateUI();
            }
        }

        function nextPhase() {
            if (currentPhaseIndex < phases.length - 1) {
                // Mark current as completed
                completedPhases.add(phases[currentPhaseIndex].id);

                // Show transition
                showTransition(phases[currentPhaseIndex], phases[currentPhaseIndex + 1]);

                setTimeout(() => {
                    currentPhaseIndex++;
                    updateUI();
                    hideTransition();
                }, 1500);
            } else {
                // Complete final phase
                completedPhases.add(phases[currentPhaseIndex].id);
                updateUI();

                // Celebration
                alert('üéâ QA Process Complete! All phases finished.');
            }
        }

        function prevPhase() {
            if (currentPhaseIndex > 0) {
                // Remove completed status from current phase if going back
                completedPhases.delete(phases[currentPhaseIndex].id);
                currentPhaseIndex--;
                updateUI();
            }
        }

        function resetPhases() {
            currentPhaseIndex = 0;
            completedPhases.clear();
            updateUI();
        }

        function showTransition(from, to) {
            const overlay = document.getElementById('transitionOverlay');
            const fromEl = document.getElementById('transitionFrom');
            const toEl = document.getElementById('transitionTo');

            fromEl.textContent = from.name.toUpperCase();
            fromEl.style.background = from.color;
            fromEl.style.color = from.id === 'prerun' || from.id === 'inprocess' ? '#000' : '#fff';

            toEl.textContent = to.name.toUpperCase();
            toEl.style.background = to.color;
            toEl.style.color = to.id === 'prerun' || to.id === 'inprocess' ? '#000' : '#fff';

            overlay.classList.add('active');
        }

        function hideTransition() {
            document.getElementById('transitionOverlay').classList.remove('active');
        }

        init();
    </script>
</body>
</html>
